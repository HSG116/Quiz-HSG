 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الاختبار النهائي في التربية الإسلامية</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark-color);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
        }

        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 L0,100 Z" /></svg>');
            opacity: 0.3;
        }

        header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            opacity: 0.9;
            position: relative;
            font-size: 18px;
        }

        .decoration {
            position: absolute;
            width: 120px;
            height: 120px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            z-index: 0;
        }

        .dec-1 {
            top: -40px;
            left: -40px;
        }

        .dec-2 {
            bottom: -50px;
            right: -50px;
            width: 180px;
            height: 180px;
        }

        .quiz-container {
            padding: 30px;
            position: relative;
        }

        .question {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
            animation: fadeIn 0.6s ease;
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 22px;
            line-height: 1.5;
            font-weight: 700;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .options {
                grid-template-columns: 1fr;
            }
        }

        .option {
            background-color: var(--light-color);
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid transparent;
            font-size: 18px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.05);
        }

        .option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .option.selected {
            border-color: var(--secondary-color);
            background-color: rgba(52, 152, 219, 0.1);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .option.correct {
            border-color: var(--success-color);
            background-color: rgba(39, 174, 96, 0.1);
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.2);
        }

        .option.incorrect {
            border-color: var(--accent-color);
            background-color: rgba(231, 76, 60, 0.1);
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);
        }

        .option-label {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-left: 10px;
            font-weight: bold;
            position: absolute;
            right: -15px;
            top: -15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .hint {
            font-size: 16px;
            color: var(--dark-color);
            margin-top: 15px;
            padding: 15px;
            background-color: #fff9e6;
            border-right: 4px solid var(--warning-color);
            border-radius: 5px;
            display: none;
            line-height: 1.6;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .show-hint {
            background-color: var(--warning-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 15px;
            margin-top: 10px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .show-hint:hover {
            background-color: #e67e22;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .show-hint i {
            margin-left: 5px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        button {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }

        button i {
            margin-left: 8px;
        }

        .progress-container {
            margin-bottom: 30px;
            background-color: #f5f5f5;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 5px;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 16px;
            color: var(--dark-color);
            font-weight: 500;
        }

        .result-container {
            text-align: center;
            padding: 40px 30px;
            display: none;
            animation: fadeIn 0.8s ease;
        }

        .result-container h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 32px;
            font-weight: 700;
        }

        .score {
            font-size: 72px;
            font-weight: bold;
            color: var(--secondary-color);
            margin: 30px 0;
            position: relative;
            display: inline-block;
        }

        .score::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 5px;
        }

        .result-message {
            font-size: 20px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: var(--dark-color);
        }

        .restart-btn {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 18px;
        }

        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            animation: fall 5s linear infinite;
            z-index: 1000;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .quran-verse {
            font-family: 'Traditional Arabic', 'Arial', sans-serif;
            font-size: 22px;
            color: #2c3e50;
            line-height: 2;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-right: 4px solid #8e44ad;
            direction: rtl;
        }

        .lesson-title {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .floating-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="decoration dec-1"></div>
            <div class="decoration dec-2"></div>
            <h1>الاختبار النهائي في التربية الإسلامية</h1>
            <p>اختبر معلوماتك مع أسئلة صعبة ومتحدية</p>
        </header>
        
        <div class="progress-container">
            <div class="progress-text">
                <span>التقدم: <span id="current-q">1</span> من <span id="total-q">25</span></span>
                <span>النقاط: <span id="score-display">0</span>/25</span>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        
        <div class="quiz-container" id="quiz">
            <!-- الأسئلة سيتم إضافتها بواسطة JavaScript -->
        </div>
        
        <div class="result-container" id="result">
            <h2>نتيجة الاختبار</h2>
            <div class="score" id="score">0%</div>
            <p class="result-message" id="result-message"></p>
            <button class="restart-btn" id="restart">
                ↻ إعادة الاختبار
            </button>
        </div>
    </div>

    <div class="floating-btn" id="hint-btn" title="إظهار جميع التلميحات">
        💡
    </div>

    <script>
        // الأسئلة الصعبة مع التلميحات
        const questions = [
            {
                lesson: "الدرس الخامس: عقيدة التوحيد (صفحة 24)",
                question: "أي من الأقسام التالية لا يُعد من أقسام توحيد المعرفة والإثبات؟",
                options: [
                    "توحيد الربوبية",
                    "توحيد الأسماء والصفات",
                    "الإقرار بأن الله وحده الخالق الرازق",
                    "إخلاص المحبة لله عز وجل وحده"
                ],
                answer: 3,
                hint: "يتعلق بأفعال العباد وليس بصفات الله أو أفعاله تجاه الكون"
            },
            {
                lesson: "الدرس الخامس: عقيدة التوحيد (صفحة 24)",
                question: "ما هو الدليل القرآني الذي يشير إلى موقف الكفار من توحيد المعرفة والإثبات؟",
                options: [
                    "﴿اللَّهُ لَا إِلَهَ إِلَّا هُوَ لَهُ الْأَسْمَاءُ الْحُسْنَى﴾ (طه: 8)",
                    "﴿وَمَا أَرْسَلْنَا مِن قَبْلِكَ مِن رَّسُولٍ إِلَّا نُوحِيَ إِلَيْهِ أَنَّهُ لَا إِلَهَ إِلَّا أَنَا فَاعْبُدُونِ﴾ (الأنبياء)",
                    "﴿وَلَئِن سَأَلْتَهُم مَّنْ خَلَقَ السَّمَوَاتِ وَالْأَرْضَ لَيَقُولُنَّ اللَّهُ قُلِ الْحَمْدُ لِلَّهِ بَلْ أَكْثَرُهُمْ لَا يَعْلَمُونَ﴾ (لقمان: 25)",
                    "﴿فَاعْبُدِ اللَّهَ مُخْلِصًا لَهُ الدِّينَ﴾ (الزمر: 2)"
                ],
                answer: 2,
                hint: "الآية التي تصف إقرارهم بالخلق مع بقائهم على الكفر"
            },
            {
                lesson: "الدرس السادس: حقيقة الإيمان (صفحة 33)",
                question: "ما هو المصطلح الذي يُعبر عن إظهار الإيمان على اللسان وإخفاء الكفر في القلب؟",
                options: ["الكفر", "الفسق", "النفاق", "الردة"],
                answer: 2,
                hint: "صفة للمنافقين"
            },
            {
                lesson: "الدرس السادس: حقيقة الإيمان (صفحة 33)",
                question: "أي من الأعمال التالية لا يُعد من نواقض الإيمان؟",
                options: [
                    "سب الذات الإلهية",
                    "إنكار فرضية الحجاب",
                    "موالاة الكافرين",
                    "أداء الفرائض والسُّنَن"
                ],
                answer: 3,
                hint: "هذا العمل يزيد الإيمان وليس ينقضه"
            },
            {
                lesson: "الدرس السابع: البعث والنشور (وأهوال القيامة) (صفحة 39)",
                question: "بعد النفخة الثانية في الصور، ما هو الحدث الذي يليها مباشرة؟",
                options: [
                    "توزيع صحف الأعمال",
                    "قيام الخلائق من القبور للحساب",
                    "العرض على الله",
                    "المرور على الصراط"
                ],
                answer: 1,
                hint: "النفخة الثانية هي نفخة الإحياء"
            },
            {
                lesson: "الدرس السابع: البعث والنشور (وأهوال القيامة) (صفحة 39)",
                question: "ما هي الحكمة الأساسية من البعث والنشور؟",
                options: [
                    "ليمتحن الناس في هذه الحياة",
                    "ليعيش الإنسان مواقف مفرحة ومحزنة",
                    "ليكون الجزاء الأبدي الخالد على الأعمال في الدنيا",
                    "لامتلاك بعض الناس الأموال الطائلة والقوة"
                ],
                answer: 2,
                hint: "تتعلق بالغاية النهائية لوجود الإنسان والعدل الإلهي"
            },
            {
                lesson: "الدرس الثامن: جمع الحديث وتدوينه (صفحة 45)",
                question: "لماذا نهى النبي ﷺ في بداية الدعوة الإسلامية عن كتابة الحديث الشريف؟",
                options: [
                    "لأنه لم يكن هناك من يجيد الكتابة",
                    "خشية أن يختلط بالقرآن الكريم",
                    "لأن الحديث لم يكن مهماً في ذلك الوقت",
                    "لعدم وجود أدوات للكتابة"
                ],
                answer: 1,
                hint: "السبب يتعلق بحفظ القرآن"
            },
            {
                lesson: "الدرس الثامن: جمع الحديث وتدوينه (صفحة 45)",
                question: "ما هي الطريقة التي اتبعها الإمام أحمد بن حنبل في تصنيف مسنده؟",
                options: [
                    "طريقة المواضيع",
                    "طريقة الأبواب",
                    "طريقة المسانيد",
                    "طريقة الأطراف"
                ],
                answer: 2,
                hint: "يقوم فيها بجمع أحاديث كل صحابي على حدة"
            },
            {
                lesson: "الدرس السادس عشر: أنواع الصدقات وفضلها (صفحة 87)",
                question: "أي من الآتي لا يُعد من أنواع الصدقات الجارية؟",
                options: [
                    "بناء المساجد",
                    "حفر الآبار",
                    "الإنفاق على الأهل والعيال",
                    "بناء المؤسسات التعليمية"
                ],
                answer: 2,
                hint: "هذا النوع من الإنفاق له أجر خاص لكنه ليس صدقة جارية بالمعنى المذكور"
            },
            {
                lesson: "الدرس السادس عشر: أنواع الصدقات وفضلها (صفحة 87)",
                question: "ما هو فضل الصدقة الذي يشير إلى مباركة الله للمتصدق في ماله؟",
                options: [
                    "يمحو الله بها الخطيئة",
                    "يجعل المتصدق في ظله يوم القيامة",
                    "تدعو له الملائكة بالبركة كل يوم",
                    "ما نقصت صدقة من مال، وما زاد الله عبداً بعفو إلا عزاً"
                ],
                answer: 3,
                hint: "يرتبط بالزيادة والنماء في المال"
            },
            {
                lesson: "الدرس السابع عشر: العقيقة وأحكام المولود (صفحة 92)",
                question: "ما هو الحكم الشرعي للعقيقة؟",
                options: ["واجبة", "سنة مستحبة", "مباحة", "مكروهة"],
                answer: 1,
                hint: "ورد في الحديث أنها 'مرتهنة'"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الأول: أحكام المد / السكون الأصلي والعارض (سورة النجم 1-25)",
                question: "ما هو السبب الرئيسي الذي يميز المد الفرعي عن المد الطبيعي؟",
                options: [
                    "وجود حرف المد",
                    "وجود همزة أو سكون",
                    "طول زمن المد",
                    "قصر زمن المد"
                ],
                answer: 1,
                hint: "ينقسم المد إلى طبيعي وفرعي، والفرعي له سببان"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الأول: أحكام المد / السكون الأصلي والعارض (سورة النجم 1-25)",
                question: "في قوله تعالى: ﴿عَلَيْهِمْ﴾، ما نوع السكون في حرف الميم إذا وصلت الكلمة بما بعدها؟",
                options: ["سكون عارض", "سكون أصلي", "لا يوجد سكون", "سكون متحرك"],
                answer: 1,
                hint: "السكون الذي لا يتغير عند الوصل والوقف"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الأول: أحكام المد / السكون الأصلي والعارض (سورة النجم 1-25)",
                question: "التعريف الدقيق للسكون العارض هو:",
                options: [
                    "ما سكن وقفًا ووصلًا",
                    "ما سكن بسبب الوقف، وكان في الأصل متحركًا",
                    "ما سكن بسبب الهمزة",
                    "ما سكن في وسط الكلمة"
                ],
                answer: 1,
                hint: "هذا السكون يظهر فقط في حالة محددة"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الثاني: المد بسبب السكون (سورة النجم 26-32)",
                question: "عند الوقف على كلمة ﴿محسنون﴾، ما هو الوجه الجائز لمد الألف فيها؟",
                options: [
                    "القصر بمقدار حركتين فقط",
                    "التوسط بمقدار أربع حركات فقط",
                    "إشباع المد بمقدار ست حركات فقط",
                    "جميع ما ذكر"
                ],
                answer: 3,
                hint: "المد العارض للسكون له ثلاثة أوجه"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الثاني: المد بسبب السكون (سورة النجم 26-32)",
                question: "ما هو المد الذي يُعد مداً طبيعياً بمقدار حركتين في حال الوصل، ويتحول إلى مد عارض للسكون في حال الوقف؟",
                options: ["المد اللازم", "مد اللين", "المد العارض للسكون", "مد البدل"],
                answer: 2,
                hint: "يعتمد على الوصل والوقف"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الثالث: مد اللين (سورة النجم 33-62)",
                question: "ما هو التعريف الدقيق لمد اللين؟",
                options: [
                    "أن يأتي حرف المد وبعده همزة في كلمة واحدة",
                    "أن يأتي حرف المد وبعده سكون أصلي",
                    "أن يأتي حرف الواو أو الياء ساكنًا وقبله مفتوح وبعده سكون عارض بسبب الوقف",
                    "أن يأتي حرف الألف ساكنًا وقبله مفتوح"
                ],
                answer: 2,
                hint: "يتعلق بحرفي الواو والياء الساكنين وما قبلهما"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الثالث: مد اللين (سورة النجم 33-62)",
                question: "ما مقدار مد اللين عند الوقف عليه؟",
                options: [
                    "حركتان فقط",
                    "أربع حركات فقط",
                    "ست حركات فقط",
                    "حركتان أو أربع أو ست حركات"
                ],
                answer: 3,
                hint: "يماثل مقدار المد العارض للسكون"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الخامس: المد اللازم (سورة الرحمن 29-45)",
                question: "ما هو تعريف المد اللازم؟",
                options: [
                    "أن يأتي بعد حرف المد همزة في كلمة واحدة",
                    "أن يأتي بعد حرف المد سكون عارض",
                    "أن يأتي بعد حرف المد سكون أصلي لازم، في كلمة أو في حرف، وصلًا ووقفًا",
                    "أن يأتي قبل حرف المد همزة"
                ],
                answer: 2,
                hint: "السكون الذي يرافقه دائمًا"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس السادس: المد اللازم الكلمي (سورة الرحمن 46 - إلى آخر السورة)",
                question: "ما هو المد اللازم الكلمي المثقل؟",
                options: [
                    "أن يأتي بعد حرف المد حرف ساكن سكونًا أصليًا غير مدغم",
                    "أن يأتي بعد حرف المد همزة",
                    "أن يأتي بعد حرف المد حرف مشدد في كلمة",
                    "أن يأتي حرف الواو أو الياء ساكنًا وقبله مفتوح"
                ],
                answer: 2,
                hint: "يتميز بالتشديد"
            },
            {
                lesson: "الجزء الأول: التلاوة والتجويد - الدرس الثامن: المد اللازم الحرفي (سورة الحديد 11-20)",
                question: "ما هو تعريف المد اللازم الحرفي المخفف؟",
                options: [
                    "أن يأتي بعد حرف المد حرف مشدد",
                    "أن يأتي بعد حرف المد حرف ساكن سكونًا أصليًا مدغمًا فيما بعده",
                    "أن يأتي بعد حرف المد حرف ساكن سكونًا أصليًا غير مدغم فيما بعده",
                    "أن يأتي قبل حرف المد همزة"
                ],
                answer: 2,
                hint: "يتعلق بالحروف التي لا تدمج مع الحرف الذي يليها"
            },
            {
                lesson: "الجزء الثاني: التربية الإسلامية - الدرس الثاني: سورة الزمر (1) الآيات 53-64",
                question: "ما هو المعنى الصحيح لكلمة ﴿أسرفوا على أنفسهم﴾ في سورة الزمر؟",
                options: [
                    "بالغوا في الطاعة",
                    "أكثروا من المعاصي",
                    "أصلحوا أحوالهم",
                    "يئسوا من رحمة الله"
                ],
                answer: 1,
                hint: "تشير إلى تجاوز الحدود في الذنوب"
            },
            {
                lesson: "الجزء الثاني: التربية الإسلامية - الدرس الرابع: سورة المؤمنون الآيات 1-11",
                question: "ما هو المعنى الدقيق لكلمة ﴿اللغو﴾ في سياق الآيات؟",
                options: [
                    "ذكر الله تعالى",
                    "الكلام الذي لا فائدة فيه",
                    "قراءة القرآن الكريم",
                    "رد السلام"
                ],
                answer: 1,
                hint: "تشير إلى الأفعال والأقوال غير المفيدة"
            },
            {
                lesson: "أسئلة إكمال السور القرآنية (صعبة جدًا - تتطلب الحفظ الدقيق)",
                question: "أكمل الآية الكريمة: 'تَنزِيلُ الْكِتَابِ مِنَ اللَّهِ الْعَزِيزِ الْحَكِيمِ ۝ إِنَّا أَنزَلْنَا إِلَيْكَ الْكِتَابَ بِالْحَقِّ فَاعْبُدِ اللَّهَ _____'",
                options: [
                    "مُخْلِصًا لَّهُ الدِّينَ",
                    "وَتَوَكَّلْ عَلَيْهِ",
                    "وَأَنِيبُوا إِلَيْهِ",
                    "وَلَا تُشْرِكُوا بِهِ شَيْئًا"
                ],
                answer: 0,
                hint: "كلمة تتعلق بالإخلاص في العبادة"
            }
        ];

        // عناصر DOM
        const quizContainer = document.getElementById('quiz');
        const resultContainer = document.getElementById('result');
        const scoreElement = document.getElementById('score');
        const resultMessage = document.getElementById('result-message');
        const restartButton = document.getElementById('restart');
        const currentQElement = document.getElementById('current-q');
        const totalQElement = document.getElementById('total-q');
        const progressBar = document.getElementById('progress');
        const scoreDisplay = document.getElementById('score-display');
        const hintBtn = document.getElementById('hint-btn');

        // متغيرات الحالة
        let currentQuestion = 0;
        let score = 0;
        let userAnswers = Array(questions.length).fill(null);
        let answeredCorrectly = Array(questions.length).fill(false);

        // تهيئة الاختبار
        function initQuiz() {
            totalQElement.textContent = questions.length;
            showQuestion();
        }

        // عرض السؤال الحالي
        function showQuestion() {
            if (currentQuestion >= questions.length) {
                showResult();
                return;
            }

            currentQElement.textContent = currentQuestion + 1;
            progressBar.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;

            const question = questions[currentQuestion];
            const questionHTML = `
                <div class="question">
                    <div class="lesson-title">${question.lesson}</div>
                    <h3>${currentQuestion + 1}. ${question.question}</h3>
                    ${question.question.includes('﴿') ? `<div class="quran-verse">${question.question.match(/﴿.*?﴾/)[0]}</div>` : ''}
                    <div class="options">
                        ${question.options.map((option, index) => `
                            <div class="option ${userAnswers[currentQuestion] === index ? (answeredCorrectly[currentQuestion] && index === question.answer ? 'correct' : 'selected') : ''}" data-index="${index}">
                                ${option}
                                <span class="option-label">${String.fromCharCode(1633 + index)}</span>
                            </div>
                        `).join('')}
                    </div>
                    <button class="show-hint">
                        💡 إظهار التلميح
                    </button>
                    <div class="hint">${question.hint}</div>
                </div>
                <div class="navigation">
                    <button id="prev" ${currentQuestion === 0 ? 'disabled' : ''}>
                        ← السابق
                    </button>
                    <button id="next" ${userAnswers[currentQuestion] === null ? 'disabled' : ''}>
                        ${currentQuestion === questions.length - 1 ? 'عرض النتيجة' : 'التالي →'}
                    </button>
                </div>
            `;

            quizContainer.innerHTML = questionHTML;

            // إضافة مستمعي الأحداث
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', selectAnswer);
            });

            document.querySelector('.show-hint').addEventListener('click', toggleHint);
            document.getElementById('prev').addEventListener('click', prevQuestion);
            document.getElementById('next').addEventListener('click', nextQuestion);

            // تحديث عرض النقاط
            updateScoreDisplay();
        }

        // اختيار الإجابة
        function selectAnswer(e) {
            const selectedOption = e.currentTarget;
            const options = document.querySelectorAll('.option');
            const answerIndex = parseInt(selectedOption.dataset.index);
            const question = questions[currentQuestion];

            // إذا كانت الإجابة صحيحة بالفعل، لا تفعل شيئًا
            if (answeredCorrectly[currentQuestion]) {
                return;
            }

            // إزالة التحديد من جميع الخيارات
            options.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });

            // تحديد الخيار المختار
            selectedOption.classList.add('selected');
            userAnswers[currentQuestion] = answerIndex;

            // تمكين زر التالي
            document.getElementById('next').disabled = false;

            // التحقق من الإجابة
            if (answerIndex === question.answer) {
                selectedOption.classList.add('correct');
                if (!answeredCorrectly[currentQuestion]) {
                    score++;
                    answeredCorrectly[currentQuestion] = true;
                }
            } else {
                selectedOption.classList.add('incorrect');
                // عرض الإجابة الصحيحة
                document.querySelector(`.option[data-index="${question.answer}"]`).classList.add('correct');
                if (answeredCorrectly[currentQuestion]) {
                    score--;
                    answeredCorrectly[currentQuestion] = false;
                }
            }

            // تحديث عرض النقاط
            updateScoreDisplay();
        }

        // تحديث عرض النقاط
        function updateScoreDisplay() {
            scoreDisplay.textContent = score;
        }

        // عرض/إخفاء التلميح
        function toggleHint() {
            const hint = document.querySelector('.hint');
            const hintButton = document.querySelector('.show-hint');

            if (hint.style.display === 'block') {
                hint.style.display = 'none';
                hintButton.innerHTML = '💡 إظهار التلميح';
            } else {
                hint.style.display = 'block';
                hintButton.innerHTML = '👁️ إخفاء التلميح';
            }
        }

        // إظهار جميع التلميحات
        function showAllHints() {
            const hints = document.querySelectorAll('.hint');
            const hintButtons = document.querySelectorAll('.show-hint');
            
            hints.forEach(hint => {
                hint.style.display = 'block';
            });
            
            hintButtons.forEach(button => {
                button.innerHTML = '👁️ إخفاء التلميح';
            });
        }

        // السؤال السابق
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // السؤال التالي
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                calculateScore();
                showResult();
            }
        }

        // حساب النتيجة
        function calculateScore() {
            score = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].answer) {
                    score++;
                }
            }
        }

        // عرض النتيجة
        function showResult() {
            quizContainer.style.display = 'none';
            resultContainer.style.display = 'block';

            const percentage = Math.round((score / questions.length) * 100);
            scoreElement.textContent = `${percentage}%`;

            if (percentage >= 90) {
                resultMessage.textContent = 'ممتاز! لديك معرفة رائعة، أحسنت! هذا المستوى يدل على فهم عميق للمادة.';
                createConfetti();
            } else if (percentage >= 70) {
                resultMessage.textContent = 'جيد جدًا! أداء قوي يدل على فهم جيد للمادة، لكن هناك بعض النقاط تحتاج إلى مراجعة.';
            } else if (percentage >= 50) {
                resultMessage.textContent = 'مستوى مقبول، لكنك تحتاج إلى مزيد من الدراسة والمراجعة لتحسين فهمك.';
            } else {
                resultMessage.textContent = 'يبدو أنك بحاجة إلى مراجعة شاملة للمادة الدراسية. ننصحك بالعودة إلى الدروس ودراستها بعناية.';
            }
        }

        // إنشاء تأثير الكونفيتي للاحتفال
        function createConfetti() {
            const colors = ['#2ecc71', '#3498db', '#e74c3c', '#f1c40f', '#9b59b6', '#1abc9c', '#e67e22'];
            const confettiContainer = document.createElement('div');
            confettiContainer.style.position = 'fixed';
            confettiContainer.style.top = '0';
            confettiContainer.style.left = '0';
            confettiContainer.style.width = '100%';
            confettiContainer.style.height = '100%';
            confettiContainer.style.pointerEvents = 'none';
            confettiContainer.style.zIndex = '1000';
            document.body.appendChild(confettiContainer);

            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.borderRadius = ['50%', '0%'][Math.floor(Math.random() * 2)];
                confettiContainer.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }

            setTimeout(() => {
                confettiContainer.remove();
            }, 5000);
        }

        // إعادة بدء الاختبار
        restartButton.addEventListener('click', () => {
            currentQuestion = 0;
            score = 0;
            userAnswers = Array(questions.length).fill(null);
            answeredCorrectly = Array(questions.length).fill(false);
            quizContainer.style.display = 'block';
            resultContainer.style.display = 'none';
            showQuestion();
        });

        // زر إظهار جميع التلميحات
        hintBtn.addEventListener('click', showAllHints);

        // بدء الاختبار
        initQuiz();
    </script>
</body>
</html>
